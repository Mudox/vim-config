" vim: filetype=vim foldmethod=marker fileformat=unix

let g:this_meta.site = 'https://github.com/Valloric/YouCompleteMe.git'

" NOTE: the dict bellow will be passed to command 'PlugInstall'
" as the 2nd argument to install this plugin.
let g:this_meta.vimplug_cmd_dict = {
      \ 'on': '',
      \ 'do': 'PATH=\"/usr/bin:$PATH\" ./install.sh --system-libclang --clang-completer --gocode-completer',
      \ }

augroup lazily_load_ycm
  autocmd InsertEnter *
        \ call plug#load('YouCompleteMe')
        \| echohl WarningMsg | echo 'loading [YouCompleteMe]...' | echohl None
        \| call youcompleteme#Enable()
        \| autocmd! lazily_load_ycm
augroup END

function g:this_meta.config()
  " white or black list
  let g:ycm_filetype_whitelist                            = {
        \ 'cpp'    : 1,
        \ 'c'      : 1,
        \ 'python' : 1,
        \ 'go'     : 1,
        \ 'css'    : 1,
        \ 'html'   : 1,
        \ }

  " identifier completer
  let g:ycm_collect_identifiers_from_tags_files           = 1
  let g:ycm_collect_identifiers_from_comments_and_strings = 1
  let g:ycm_seed_identifiers_with_syntax                  = 1

  let g:ycm_always_populate_location_list                 = 1

  let g:ycm_complete_in_strings                           = 1
  let g:ycm_complete_in_comments                          = 1

  let g:ycm_max_diagnostics_to_display                    = 15

  " preview window
  let g:ycm_autoclose_preview_window_after_completion     = 1
  let g:ycm_autoclose_preview_window_after_insertion      = 1

  let g:ycm_global_ycm_extra_conf                         =
        \ expand('$MDX_DOT_FILES') . '/ycm_extra_conf.py'

  let g:ycm_allow_changing_updatetime                     = 1

  let g:ycm_key_list_select_completion                    = ['<Down>']
  let g:ycm_key_list_previous_completion                  = ['<Up>']

  "let g:ycm_key_detailed_diagnostics = '<leader>d'
  "let g:ycm_key_invoke_completion = '<C-Space>'
  "let g:ycm_key_list_previous_completion = ['<S-TAB>', '<Up>']
  "let g:ycm_key_list_select_completion = ['<TAB>', '<Down>']

  "let g:ycm_goto_buffer_command = 'same-buffer'
endfunction
